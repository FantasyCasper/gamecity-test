<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="admin.css">
    <link rel="icon" type="image/png" href="../icons/icon-192x192.png">
</head>

<body>
    <div class="container">

        <div class="tab-nav">
            <button id="mobile-menu-toggle">‚ò∞ Menu</button>

            <a href="../index.html" id="back-button">&laquo; Terug naar de app</a>

            <button class="tab-link active" data-tab="tab-logs">Logboek</button>
            <button class="tab-link" data-tab="tab-users">Gebruikersbeheer</button>
            <button class="tab-link" data-tab="tab-checklists">Checklist Beheer</button>
            <button class="tab-link" data-tab="tab-algemeen-defecten">Defecten</button>
            <button class="tab-link" data-tab="tab-stats">Statistieken</button>
        </div>

        <div id="status-message">Laden...</div>

        <div id="tab-logs" class="tab-content active">
            <h2>Logboek Overzicht</h2>
            <table id="log-table">
                <thead>
                    <tr>
                        <th>Tijdstip</th>
                        <th>Medewerker</th>
                        <th>Activiteit</th>
                        <th>Lijst</th>
                        <th>Voltooid</th>
                        <th>Gemist</th>
                        <th>Bijzonderheden</th>
                    </tr>
                </thead>
                <tbody id="log-body"></tbody>
            </table>
        </div>

        <div id="tab-users" class="tab-content">
            <h2>Nieuwe Gebruiker Toevoegen</h2>
            <form id="add-user-form">
                <div class="form-grid">
                    <div class="form-veld">
                        <label for="new-username">Gebruikersnaam</label>
                        <input type="text" id="new-username" required>
                    </div>
                    <div class="form-veld">
                        <label for="new-fullname">Volledige Naam</label>
                        <input type="text" id="new-fullname" required>
                    </div>
                    <div class="form-veld">
                        <label for="new-pincode">Pincode (4 cijfers)</label>
                        <input type="password" id="new-pincode" required maxlength="4">
                    </div>
                </div>

                <div class="form-veld" style="margin-top: 15px;">
                    <label style="margin-bottom: 10px; display:block;">Rechten:</label>
                    <div style="display: flex; flex-wrap: wrap; gap: 15px;">
                        <div>
                            <input type="checkbox" id="perm-checklists">
                            <label for="perm-checklists" style="display:inline; font-weight:normal;">Checklists</label>
                        </div>
                        <div>
                            <input type="checkbox" id="perm-admin">
                            <label for="perm-admin" style="display:inline; font-weight:normal;">Admin Panel
                                (Volledig)</label>
                        </div>
                        <div>
                            <input type="checkbox" id="perm-td">
                            <label for="perm-td" style="display:inline; font-weight:normal;">TD (Alleen
                                Defecten)</label>
                        </div>
                        <div>
                            <input type="checkbox" id="perm-users">
                            <label for="perm-users" style="display:inline; font-weight:normal;">Gebruikersbeheer</label>
                        </div>
                    </div>
                </div>

                <button type="submit" id="add-user-button">Gebruiker Toevoegen</button>
            </form>

            <h2 class="user-list-header">Bestaande Gebruikers</h2>
            <table id="user-table">
                <thead>
                    <tr>
                        <th>Gebruiker</th>
                        <th>Naam</th>
                        <th>Checklists</th>
                        <th>Admin</th>
                        <th>TD</th>
                        <th>Users</th>
                        <th>Actie</th>
                    </tr>
                </thead>
                <tbody id="user-body"></tbody>
            </table>
        </div>

        <div id="tab-checklists" class="tab-content">
            <h2>Checklists Bewerken</h2>
            <p>Selecteer een activiteit om de taken te bewerken.</p>

            <div id="checklist-editor">
                <div class="form-veld">
                    <label for="cl-activiteit">Kies een activiteit om te bewerken:</label>
                    <select id="cl-activiteit">
                        <option value="">-- Selecteer --</option>
                        <option value="Baan">Baan</option>
                        <option value="Lasergame">Lasergame</option>
                        <option value="Prison Island">Prison Island</option>
                        <option value="Minigolf">Minigolf</option>
                    </select>
                </div>

                <div class="form-grid">
                    <div class="form-veld">
                        <label for="cl-openen-input">Openen Taken</label>
                        <div class="list-builder">
                            <ul id="cl-openen-list" class="task-list"></ul>
                            <div class="add-task-form">
                                <input type="text" id="cl-openen-input" placeholder="Nieuwe taak...">
                                <button type="button" class="add-task-btn" data-target-list="cl-openen-list"
                                    data-source-input="cl-openen-input">+</button>
                            </div>
                        </div>
                    </div>

                    <div class="form-veld">
                        <label for="cl-sluiten-input">Sluiten Taken</label>
                        <div class="list-builder">
                            <ul id="cl-sluiten-list" class="task-list"></ul>
                            <div class="add-task-form">
                                <input type="text" id="cl-sluiten-input" placeholder="Nieuwe taak...">
                                <button type="button" class="add-task-btn" data-target-list="cl-sluiten-list"
                                    data-source-input="cl-sluiten-input">+</button>
                            </div>
                        </div>
                    </div>
                </div>

                <button type="button" id="checklist-save-button">Checklist Opslaan</button>
            </div>
        </div>

        <div id="tab-algemeen-defecten" class="tab-content">
            <h2>Overzicht Algemene Defecten</h2>
            <p>Overzicht van alle defecten (exclusief karts), met de nieuwste bovenaan.</p>

            <div class="form-veld" style="margin-bottom: 20px; max-width: 300px;">
                <label for="admin-filter-locatie">Filter op Locatie:</label>
                <select id="admin-filter-locatie">
                    <option value="alle">Alle Locaties</option>
                    <option value="Baan">Baan</option>
                    <option value="Lasergame">Lasergame</option>
                    <option value="Prison Island">Prison Island</option>
                    <option value="Minigolf">Minigolf</option>
                    <option value="Algemeen">Algemeen</option>
                </select>
            </div>
            <h2>Overzicht Algemene Defecten</h2>
            <p>Overzicht van alle defecten (exclusief karts), met de nieuwste bovenaan.</p>

            <table id="algemeen-defect-table">
                <thead>
                    <tr>
                        <th>Tijdstip</th>
                        <th>Gemeld door</th>
                        <th>Locatie</th>
                        <th>Omschrijving</th>
                        <th>Status</th>
                        <th>Actie</th>
                    </tr>
                </thead>
                <tbody id="algemeen-defect-body">
                </tbody>
            </table>
        </div>
        <div id="tab-stats" class="tab-content">
            <h2>Statistieken & Rapportages</h2>

            <div class="stat-box-grid">
                <div class="stat-box" style="border-bottom: 4px solid #007bff;">
                    <span id="stat-total-count">0</span>Totaal Gemeld
                </div>
                <div class="stat-box" style="border-bottom: 4px solid #2ecc71;">
                    <span id="stat-solved-percentage">0%</span>Opgelost
                </div>
            </div>

            <div class="form-grid" style="margin-top: 30px;">
                <div class="form-veld" style="background: #2a2a2a; padding: 20px; border-radius: 8px;">
                    <h3 style="margin-top:0;">üèÜ Top 5 "Probleem Karts"</h3>
                    <p style="color:#aaa; font-size:0.9em;">Karts met de meeste meldingen ooit.</p>
                    <table style="width:100%; margin-top:15px;">
                        <thead>
                            <tr>
                                <th style="text-align:left;">Kart #</th>
                                <th style="text-align:right;">Meldingen</th>
                            </tr>
                        </thead>
                        <tbody id="top-karts-tbody">
                            <tr>
                                <td colspan="2">Laden...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="form-veld" style="background: #2a2a2a; padding: 20px; border-radius: 8px;">
                    <h3 style="margin-top:0;">üìä Status Verdeling</h3>
                    <p style="color:#aaa; font-size:0.9em;">Verhouding Open vs Opgelost.</p>

                    <div
                        style="margin-top: 40px; height: 30px; background: #444; border-radius: 15px; overflow: hidden; display: flex;">
                        <div id="bar-solved"
                            style="width: 50%; background: #2ecc71; display: flex; align-items: center; justify-content: center; color: #fff; font-weight: bold; font-size: 0.8em;">
                            50%</div>
                        <div id="bar-open"
                            style="width: 50%; background: #e74c3c; display: flex; align-items: center; justify-content: center; color: #fff; font-weight: bold; font-size: 0.8em;">
                            50%</div>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.9em; color: #ccc;">
                        <span>‚úÖ Opgelost</span>
                        <span>‚ö†Ô∏è Open</span>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div id="custom-modal-overlay" class="modal-overlay"></div>
    <div id="custom-modal" class="modal-box">
        <h3 id="modal-title">Succes</h3>
        <p id="modal-message">Bericht...</p>
        <button id="modal-ok-btn">OK</button>
    </div>

    <script src="admin.js"></script>
</body>

</html>